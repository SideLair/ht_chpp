# HT CHPP Endpoint Definitions

definitions:
  types:
    int: Int64
    str: Utf8
    float: Float64
    bool: Boolean

endpoints:
  # Achievements endpoint
  achievements:
    version:
      "1.2":
        parameters:
          - userID
        api_schema:
          HattrickData:
          - FileName: str
          - Version: str
          - UserID: int
          - FetchedDate: str
          - MaxPoints: int
          - AchievementList:
              Achievement:
                - AchievementTypeID: int
                - AchievementTitle: str
                - AchievementText: str
                - CategoryID: int
                - EventDate: str
                - Points: int
                - MultiLevel: bool
                - Rank: int
                - NumberOfEvents: int
        output_schema:
          tables:
            achievements:
              source_path: "AchievementList"
              fields:
                - UserID
                - MaxPoints
                - AchievementTypeID
                - AchievementTitle
                - AchievementText
                - CategoryID
                - EventDate
                - Points
                - MultiLevel
                - Rank
                - NumberOfEvents
              parent_fields:
                - UserID
                - MaxPoints

# League Details endpoint
leaguedetails:
  version:
    "1.6":
      parameters:
        - leagueLevelUnitID
      api_schema:
        HattrickData:
          - FileName: str
          - Version: str
          - UserID: int
          - FetchedDate: str
          - LeagueID: int
          - LeagueName: str
          - LeagueLevel: int
          - MaxLevel: int
          - LeagueLevelUnitID: int
          - LeagueLevelUnitName: str
          - CurrentMatchRound: int
          - Rank: int
          # bloody ht api discrepency
          - Team:
              Team:
                - UserId: int
                - TeamID: int
                - TeamName: str
                - Position: int
                - PositionChange: int
                - Matches: int
                - GoalsFor: int
                - GoalsAgainst: int
                - Points: int
                - Won: int
                - Draws: int
                - Lost: int
      output_schema:
        tables:
          teams:
            source_path: "Team"
            fields:
              - LeagueID
              - LeagueName
              - LeagueLevel
              - MaxLevel
              - LeagueLevelUnitID
              - LeagueLevelUnitName
              - CurrentMatchRound
              - Rank
              - UserId
              - TeamID
              - TeamName
              - Position
              - PositionChange
              - Matches
              - GoalsFor
              - GoalsAgainst
              - Points
              - Won
              - Draws
              - Lost
            parent_fields:
              - LeagueID
              - LeagueName
              - LeagueLevel
              - MaxLevel
              - LeagueLevelUnitID
              - LeagueLevelUnitName
              - CurrentMatchRound
              - Rank

# League Levels endpoint
leaguelevels:
  version:
    "1.0":
      parameters:
        - LeagueID
      api_schema:
        HattrickData:
          - FileName: str
          - Version: str
          - UserID: int
          - FetchedDate: str
          - LeagueID: int
          - Season: int
          - NrOfLeagueLevels: int
          - LeagueLevelList:
              LeagueLevelItem:
                - LeagueLevel: int
                - NrOfLeagueLevelUnits: int
                - LeagueLevelUnitIdList: str
                - NrOfTeams: int
                - NrOfSharedPromotionSlotsPerSeries: int
                - NrOfDirectPromotionSlotsPerSeries: int
                - NrOfQualificationPromotionSlotsPerSeries: int
                - NrOfDirectDemotionSlotsPerSeries: int
                - NrOfQualificationDemotionSlotsPerSeries: int
      output_schema:
        tables:
          leaguelevels:
            source_path: "LeagueLevelList"
            fields:
              - LeagueID
              - Season
              - NrOfLeagueLevels
              - LeagueLevel
              - NrOfLeagueLevelUnits
              - LeagueLevelUnitIdList
              - NrOfTeams
              - NrOfSharedPromotionSlotsPerSeries
              - NrOfDirectPromotionSlotsPerSeries
              - NrOfQualificationPromotionSlotsPerSeries
              - NrOfDirectDemotionSlotsPerSeries
              - NrOfQualificationDemotionSlotsPerSeries
            parent_fields:
              - LeagueID
              - Season
              - NrOfLeagueLevels

# Manager Compendium endpoint
managercompendium:
  version:
    "1.5":
      parameters:
        - userId
      schema:
        HattrickData:
          - FileName: str
          - Version: str
          - UserID: int
          - FetchedDate: str
          - Manager:
              Manager:
                - UserId: int
                - Loginname: str
                - SupporterTier: str
                - LastLogins:
                    LoginTime:
                      - LoginTime: str
                - Language:
                    Language:
                      - LanguageId: int
                      - LanguageName: str
                - Country:
                    Country:
                      - CountryId: int
                      - CountryName: str
                - Currency:
                    Currency:
                      - CurrencyName: str
                      - CurrencyRate: float
                - Teams:
                    Team:
                      - TeamId: int
                      - TeamName: str
                      - Arena:
                          Arena:
                            - ArenaId: int
                            - ArenaName: str
                      - League:
                          League:
                            - LeagueId: int
                            - LeagueName: str
                            - Season: int
                      - Country:
                          Country:
                            - CountryId: int
                            - CountryName: str
                      - LeagueLevelUnit:
                          LeagueLevelUnit:
                            - LeagueLevelUnitId: int
                            - LeagueLevelUnitName: str
                      - Region:
                          Region:
                            - RegionId: int
                            - RegionName: str
                      - YouthTeam:
                          YouthTeam:
                            - YouthTeamId: int
                            - YouthTeamName: str
                            - YouthLeague:
                                YouthLeague:
                                  - YouthLeagueId: int
                                  - YouthLeagueName: str
                - NationalTeamCoach:
                    NationalTeam:
                      - NationalTeamId: int
                      - NationalTeamName: str
                - NationalTeamAssistant:
                    NationalTeam:
                      - NationalTeamId: int
                      - NationalTeamName: str
                - Avatar:
                    Avatar:
                      - BackgroundImage: str
                      - Layer:
                          Layer:
                            - Image: str

# World Details endpoint
worlddetails:
  version:
    "1.9":
      parameters:
        - includeRegions
        - countryID
        - leagueID
      api_schema:
        HattrickData:
          - FileName: str
          - Version: str
          - UserID: int
          - FetchedDate: str
          - LeagueList:
              League:
                - LeagueID: int
                - LeagueName: str
                - Season: int
                - SeasonOffset: int
                - MatchRound: int
                - ShortName: str
                - Continent: str
                - ZoneName: str
                - EnglishName: str
                - LanguageId: int
                - LanguageName: str
                - Country:
                    Country:
                      - CountryID: int
                      - CountryName: str
                      - CurrencyName: str
                      - CurrencyRate: float
                      - CountryCode: str
                      - DateFormat: str
                      - TimeFormat: str
                - Cups:
                    Cup:
                      - CupID: int
                      - CupName: str
                      - CupLeagueLevel: int
                      - CupLevel: int
                      - CupLevelIndex: int
                      - MatchRound: int
                      - MatchRoundsLeft: int
                - NationalTeamId: int
                - U20teamId: int
                - ActiveTeams: int
                - ActiveUsers: int
                - WaitingUsers: int
                - TrainingDate: str
                - EconomyDate: str
                - CupMatchDate: str
                - SeriesMatchDate: str
                - Sequence1: str
                - Sequence2: str
                - Sequence3: str
                - Sequence5: str
                - Sequence7: str
                - NumberOfLevels: int
      output_schema:
        tables:
          leagues:
            source_path: "LeagueList"
            fields:
              - LeagueID
              - LeagueName
              - Season
              - SeasonOffset
              - MatchRound
              - ShortName
              - Continent
              - ZoneName
              - EnglishName
              - LanguageId
              - LanguageName
              - NationalTeamId
              - U20teamId
              - ActiveTeams
              - ActiveUsers
              - WaitingUsers
              - TrainingDate
              - EconomyDate
              - CupMatchDate
              - SeriesMatchDate
              - Sequence1
              - Sequence2
              - Sequence3
              - Sequence5
              - Sequence7
              - NumberOfLevels
          countries:
            source_path: "LeagueList.Country"
            foreign_key: "LeagueID"
            fields:
              - LeagueID
              - CountryID
              - CountryName
              - CurrencyName
              - CurrencyRate
              - CountryCode
              - DateFormat
              - TimeFormat
          cups:
            source_path: "LeagueList.Cups"
            foreign_key: "LeagueID"
            fields:
              - LeagueID
              - CupID
              - CupName
              - CupLeagueLevel
              - CupLevel
              - CupLevelIndex
              - MatchRound
              - MatchRoundsLeft